# Linux系统IO原理

## 书籍推荐
《深入理解Linux内核》《深入理解计算机系统》

## 面试问题
epoll是怎么知道数据到达、可以通知用户读取的？  
这里面有一个中断的概念，调用了epoll_wait
补充pagecache的知识：  
内存分配的时候是大家在物理内存中共同使用一个kernel，然后是各个应用程序都打散，分布到内存的各个地方，因为他们并不是一口气被分配出来的，而是
用到哪一部分就分配哪一部分，程序以碎片的方式在物理空间里，但是虚拟地址中他自己是独占的。这里面就牵扯到一个问题：虚拟内存中线性地址连续的两段
地址，可能被映射到不同的物理地址，这需要一个MMU，程序里还要把映射表提供给MMU去换算这个映射的关系表。硬件的MMU所依赖的是page，一页在物理内存
中的大小是默认4kB，管理物理内存线性地址的时候，一堆4k的小格子，程序用谁了，找个空的4k小格子，把数据放进去，并映射上。但是，系统不会全量分配，
所以有时候会有缺页异常，类似于软中断，跑到内核里面，开始建立页的映射关系，把页补上，然后在漂移回来，染CPU继续执行指令。C的操作系统进程跑起来之后，
有这么几段：代码段、数据段、栈、堆，寄存器会指向这几个段的基地址，然后给出便宜就知道具体哪个位置了。先从硬盘把程序文件appW(binary)加载到内存，
这个时候也会触发page，读4k先放进来。假设文件有10个4k，但是可能先房间一个4k，随着访问的需要，再继续分配，按需分配。

